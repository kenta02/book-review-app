openapi: 3.0.3
info:
  title: Book Review App API
  description: |
    æ›¸ç±ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®REST APIä»•æ§˜

    ğŸ” èªè¨¼ã«ã¤ã„ã¦ï¼š
    - ä¿è­·ã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆğŸ”’ãƒãƒ¼ã‚¯ï¼‰ã«ã¯ Authorization ãƒ˜ãƒƒãƒ€ãƒ¼ãŒå¿…è¦ã§ã™
    - Format: `Authorization: Bearer <JWT_TOKEN>`
  version: 1.0.0
  contact:
    name: Book Review App
  license:
    name: ISC

servers:
  - url: http://localhost:3001/api
    description: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

tags:
  - name: Auth
    description: èªè¨¼é–¢é€£
  - name: Books
    description: æ›¸ç±ç®¡ç†
  - name: Reviews
    description: ãƒ¬ãƒ“ãƒ¥ãƒ¼ç®¡ç†
  - name: Users
    description: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
  - name: Favorites
    description: ãŠæ°—ã«å…¥ã‚Šç®¡ç†
  - name: Comments
    description: ã‚³ãƒ¡ãƒ³ãƒˆç®¡ç†
  - name: Notifications
    description: é€šçŸ¥ç®¡ç†
  - name: External
    description: å¤–éƒ¨ API é€£æº

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWTèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³

        **ä½¿ç”¨æ³•:** Swagger UI ã® Authorize ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«ã¯ **ãƒˆãƒ¼ã‚¯ãƒ³æœ¬ä½“ã®ã¿** ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼ˆå…ˆé ­ã« `Bearer ` ã‚’ä»˜ã‘ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚
        ã‚‚ã— `Bearer ` ã‚’å«ã‚ã¦ã—ã¾ã†ã¨ `Bearer Bearer ...` ã¨ãªã‚Šèªè¨¼ã«å¤±æ•—ã—ã¾ã™ã€‚

  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          example: 1
        username:
          type: string
          example: tanaka
        email:
          type: string
          format: email
          example: tanaka@example.com
        role:
          type: string
          enum: [user, admin]
          example: user

    Book:
      type: object
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: å¾è¼©ã¯çŒ«ã§ã‚ã‚‹
        author:
          type: string
          example: å¤ç›®æ¼±çŸ³
        publicationYear:
          type: integer
          example: 1905
        ISBN:
          type: string
          example: 9784101010014
        summary:
          type: string
        averageRating:
          type: number
          format: float
          example: 4.2
        reviewCount:
          type: integer
          example: 15
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Review:
      type: object
      properties:
        id:
          type: integer
        bookId:
          type: integer
        userId:
          type: integer
        username:
          type: string
        content:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        helpfulCount:
          type: integer
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Comment:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: integer
        username:
          type: string
        content:
          type: string
        createdAt:
          type: string
          format: date-time

    Pagination:
      type: object
      properties:
        currentPage:
          type: integer
        totalPages:
          type: integer
        totalItems:
          type: integer
        itemsPerPage:
          type: integer

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            message:
              type: string
            code:
              type: string

paths:
  /auth/register:
    post:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - email
                - password
              properties:
                username:
                  type: string
                  minLength: 3
                  maxLength: 150
                  example: tanaka
                email:
                  type: string
                  format: email
                  example: tanaka@example.com
                password:
                  type: string
                  minLength: 8
                  example: password123
      responses:
        '201':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
                      token:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        '400':
          description: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ¡ãƒ¼ãƒ«æ—¢å­˜
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/login:
    post:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: tanaka@example.com
                password:
                  type: string
                  example: password123
      responses:
        '200':
          description: ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
                      token:
                        type: string
        '401':
          description: èªè¨¼å¤±æ•—
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/me:
    get:
      summary: ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
      tags: [Auth]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '401':
          description: æœªèªè¨¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /books:
    get:
      summary: æ›¸ç±ä¸€è¦§å–å¾—
      tags: [Books]
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: search
          in: query
          schema:
            type: string
          description: ã‚¿ã‚¤ãƒˆãƒ«ã¾ãŸã¯è‘—è€…ã§æ¤œç´¢
        - name: minRating
          in: query
          schema:
            type: number
        - name: maxRating
          in: query
          schema:
            type: number
        - name: yearFrom
          in: query
          schema:
            type: integer
        - name: yearTo
          in: query
          schema:
            type: integer
        - name: sort
          in: query
          schema:
            type: string
            enum: [title, author, publicationYear, rating, createdAt]
        - name: order
          in: query
          schema:
            type: string
            enum: [ASC, DESC]
      responses:
        '200':
          description: æ›¸ç±ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      books:
                        type: array
                        items:
                          $ref: '#/components/schemas/Book'
                      pagination:
                        $ref: '#/components/schemas/Pagination'

    post:
      summary: æ›¸ç±è¿½åŠ 
      tags: [Books]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - author
                - publicationYear
                - ISBN
                - summary
              properties:
                title:
                  type: string
                author:
                  type: string
                publicationYear:
                  type: integer
                ISBN:
                  type: string
                summary:
                  type: string
      responses:
        '201':
          description: æ›¸ç±è¿½åŠ æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Book'
        '400':
          description: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
        '409':
          description: ISBNæ—¢å­˜

  /books/{id}:
    get:
      summary: æ›¸ç±è©³ç´°å–å¾—
      tags: [Books]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: æ›¸ç±è©³ç´°å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Book'
        '404':
          description: æ›¸ç±ãŒè¦‹ã¤ã‹ã‚‰ãªã„

    put:
      summary: æ›¸ç±æ›´æ–°ï¼ˆéƒ¨åˆ†æ›´æ–°å¯¾å¿œï¼‰
      tags: [Books]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                author:
                  type: string
                publicationYear:
                  type: integer
                ISBN:
                  type: string
                summary:
                  type: string
      responses:
        '200':
          description: æ›¸ç±æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Book'
        '400':
          description: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
        '404':
          description: æ›¸ç±ãŒè¦‹ã¤ã‹ã‚‰ãªã„
        '409':
          description: é‡è¤‡ISBN

    delete:
      summary: æ›¸ç±å‰Šé™¤
      tags: [Books]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: æ›¸ç±å‰Šé™¤æˆåŠŸï¼ˆãƒœãƒ‡ã‚£ãªã—ï¼‰
        '404':
          description: æ›¸ç±ãŒè¦‹ã¤ã‹ã‚‰ãªã„
        '409':
          description: é–¢é€£ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ãŸã‚å‰Šé™¤ä¸å¯

  /books/{bookId}/reviews:
    get:
      summary: ç‰¹å®šæ›¸ç±ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼å–å¾—
      tags: [Books]
      parameters:
        - name: bookId
          in: path
          required: true
          schema:
            type: integer
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: ãƒ¬ãƒ“ãƒ¥ãƒ¼å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      reviews:
                        type: array
                        items:
                          $ref: '#/components/schemas/Review'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
                      averageRating:
                        type: number
                      reviewCount:
                        type: integer
        '404':
          description: æ›¸ç±ãŒè¦‹ã¤ã‹ã‚‰ãªã„

  /reviews:
    get:
      summary: ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§å–å¾—
      tags: [Reviews]
      parameters:
        - name: bookId
          in: query
          schema:
            type: integer
        - name: userId
          in: query
          schema:
            type: integer
        - name: page
          in: query
          schema:
            type: integer
        - name: limit
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§å–å¾—æˆåŠŸ

    post:
      summary: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿
      tags: [Reviews]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - bookId
                - content
                - rating
              properties:
                bookId:
                  type: integer
                content:
                  type: string
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
      responses:
        '201':
          description: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿æˆåŠŸ
        '404':
          description: æ›¸ç±ãŒè¦‹ã¤ã‹ã‚‰ãªã„

  /reviews/{id}:
    get:
      summary: ãƒ¬ãƒ“ãƒ¥ãƒ¼è©³ç´°å–å¾—
      tags: [Reviews]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ãƒ¬ãƒ“ãƒ¥ãƒ¼è©³ç´°å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                      bookId:
                        type: integer
                      userId:
                        type: integer
                      username:
                        type: string
                      content:
                        type: string
                      rating:
                        type: integer
                      helpfulCount:
                        type: integer
                      comments:
                        type: array
                        items:
                          $ref: '#/components/schemas/Comment'
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time

    put:
      summary: ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°
      tags: [Reviews]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [content]
              properties:
                content:
                  type: string
                  maxLength: 1000
      responses:
        '200':
          description: ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°æˆåŠŸï¼ˆæ›´æ–°å¾Œã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”å´ï¼‰
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Review'
        '400':
          description: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼ˆç„¡åŠ¹ãª reviewId ã‚„ contentï¼‰
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æœªèªè¨¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: æ¨©é™ä¸è¶³
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      summary: ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤
      tags: [Reviews]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            minimum: 1
          description: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼IDï¼ˆæ•´æ•°ã€1ä»¥ä¸Šï¼‰ã€‚å°æ•°ã‚„0ä»¥ä¸‹ã¯ 400 ã‚’è¿”ã—ã¾ã™ã€‚'
      responses:
        '204':
          description: ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤æˆåŠŸï¼ˆNo Contentï¼‰
        '400':
          description: ç„¡åŠ¹ãª reviewIdï¼ˆéæ•´æ•°ãƒ»0ä»¥ä¸‹ãƒ»ä¸æ­£å€¤ï¼‰
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æœªèªè¨¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: æ¨©é™ä¸è¶³ï¼ˆä»–äººã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã‚ˆã†ã¨ã—ãŸï¼‰
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: æŒ‡å®šã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå­˜åœ¨ã—ãªã„
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: é–¢é€£ã‚³ãƒ¡ãƒ³ãƒˆãŒå­˜åœ¨ã™ã‚‹ãŸã‚å‰Šé™¤ä¸å¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ã‚µãƒ¼ãƒãƒ¼å†…éƒ¨ã‚¨ãƒ©ãƒ¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /reviews/{id}/helpful:
    post:
      summary: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å½¹ã«ç«‹ã£ãŸã¨ã—ã‚‹
      tags: [Reviews]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: å½¹ã«ç«‹ã£ãŸã‚«ã‚¦ãƒ³ãƒˆè¿½åŠ æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      helpfulCount:
                        type: integer

  /users/{id}:
    get:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
      tags: [Users]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                      username:
                        type: string
                      reviewCount:
                        type: integer
                      favoriteCount:
                        type: integer
                      createdAt:
                        type: string
                        format: date-time

  /users/{id}/reviews:
    get:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§
      tags: [Users]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§å–å¾—æˆåŠŸ

  /users/{id}/favorites:
    get:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŠæ°—ã«å…¥ã‚Šæ›¸ç±ä¸€è¦§
      tags: [Users]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ãŠæ°—ã«å…¥ã‚Šä¸€è¦§å–å¾—æˆåŠŸ

  /favorites:
    post:
      summary: ãŠæ°—ã«å…¥ã‚Šè¿½åŠ 
      tags: [Favorites]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - bookId
              properties:
                bookId:
                  type: integer
      responses:
        '201':
          description: ãŠæ°—ã«å…¥ã‚Šè¿½åŠ æˆåŠŸ

  /favorites/{bookId}:
    delete:
      summary: ãŠæ°—ã«å…¥ã‚Šå‰Šé™¤
      tags: [Favorites]
      security:
        - BearerAuth: []
      parameters:
        - name: bookId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ãŠæ°—ã«å…¥ã‚Šå‰Šé™¤æˆåŠŸ

  /comments:
    post:
      summary: ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ï¼ˆDeprecatedï¼‰
      description: 'Deprecated: API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åˆã‚ã›ã¦ POST /reviews/{reviewId}/comments ã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚'
      deprecated: true
      tags: [Comments]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - reviewId
                - content
              properties:
                reviewId:
                  type: integer
                content:
                  type: string
                parentId:
                  type: integer
                  description: ãƒªãƒ—ãƒ©ã‚¤ã®å ´åˆã€è¦ªã‚³ãƒ¡ãƒ³ãƒˆID
      responses:
        '201':
          description: ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æˆåŠŸ

  /comments/{id}:
    put:
      summary: ã‚³ãƒ¡ãƒ³ãƒˆç·¨é›†
      description: è‡ªåˆ†ãŒæŠ•ç¨¿ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆã‚’ç·¨é›†ã—ã¾ã™ã€‚æŠ•ç¨¿è€…ã®ã¿ç·¨é›†å¯èƒ½ã€‚
      tags: [Comments]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
      responses:
        '200':
          description: ã‚³ãƒ¡ãƒ³ãƒˆç·¨é›†æˆåŠŸ
    delete:
      summary: ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤
      tags: [Comments]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤æˆåŠŸï¼ˆãƒœãƒ‡ã‚£ãªã—ï¼‰

  /reviews/{reviewId}/comments:
    post:
      summary: ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ï¼ˆç‰¹å®šãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
      tags: [Comments]
      security:
        - BearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                parentId:
                  type: integer
                  description: ãƒªãƒ—ãƒ©ã‚¤ã®å ´åˆã€è¦ªã‚³ãƒ¡ãƒ³ãƒˆID
      responses:
        '201':
          description: ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æˆåŠŸ

    get:
      summary: ç‰¹å®šãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§å–å¾—
      tags: [Comments]
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: integer
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§å–å¾—æˆåŠŸ

  /notifications:
    get:
      summary: é€šçŸ¥ä¸€è¦§å–å¾—
      tags: [Notifications]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: é€šçŸ¥ä¸€è¦§å–å¾—æˆåŠŸ

  /notifications/{id}/read:
    put:
      summary: é€šçŸ¥ã‚’æ—¢èª­ã«ã™ã‚‹
      tags: [Notifications]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: é€šçŸ¥æ—¢èª­åŒ–æˆåŠŸ

  /external/books/search:
    get:
      summary: å¤–éƒ¨ API (Google Books) æ¤œç´¢
      tags: [External]
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æ¤œç´¢æˆåŠŸ

  /external/books/isbn/{isbn}:
    get:
      summary: ISBN ã‹ã‚‰æ›¸ç±æƒ…å ±å–å¾—
      tags: [External]
      parameters:
        - name: isbn
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: å–å¾—æˆåŠŸ
